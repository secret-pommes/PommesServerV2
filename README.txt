shity code but it was working ok

Slow startup
bad structure
